/* -- 1. Global Styles & Variables -- */
:root {
    /* Light Theme - High Contrast */
    --primary-color: #3B82F6;
    --primary-hover-color: #2563EB;
    --sidebar-bg: #111827;
    --sidebar-text: #d1d5db;
    --sidebar-text-active: #ffffff;
    --main-bg: #f9fafb;
    --card-bg: #ffffff;
    --font-color: #111827; /* Darker text */
    --border-color: #e5e7eb;
    --input-bg: #FFFFFF;
    --input-border: #D1D5DB;
    --input-text: #111827;
    --btn-secondary-bg: #E5E7EB;
    --btn-secondary-text: #374151;
    --btn-secondary-hover-bg: #D1D5DB;

    --transition-speed: 0.2s;
}

/* Dark Theme - High Contrast */
[data-theme="dark"] {
    --primary-color: #60A5FA;
    --primary-hover-color: #93C5FD;
    --sidebar-bg: #111827;
    --sidebar-text: #d1d5db;
    --main-bg: #030712; /* Near black */
    --card-bg: #111827; /* Dark slate */
    --font-color: #f9fafb; /* Brighter text */
    --border-color: #374151;
    --input-bg: #1F2937;
    --input-border: #4B5563;
    --input-text: #F9FAFB;
    --btn-secondary-bg: #374151;
    --btn-secondary-text: #E5E7EB;
    --btn-secondary-hover-bg: #4B5563;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--main-bg);
    color: var(--font-color);
    transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
}

/* -- 2. App Layout (Original Alignment Preserved) -- */
.app-layout {
    display: flex;
    min-height: 100vh;
}

.sidebar {
    width: 250px;
    background-color: var(--sidebar-bg);
    color: var(--sidebar-text);
    padding: 20px;
    flex-shrink: 0;
}

.main-content {
    flex-grow: 1;
    padding: 30px;
    animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* -- 3. Sidebar Styles (Original Alignment Preserved) -- */
.sidebar-header h2 {
    color: #fff;
    text-align: center;
    margin-bottom: 40px;
    font-size: 28px;
}

.sidebar-nav {
    list-style-type: none;
}

.sidebar-nav li a {
    display: block;
    color: var(--sidebar-text);
    text-decoration: none;
    padding: 15px 20px;
    border-radius: 8px;
    margin-bottom: 5px;
    transition: background-color var(--transition-speed), color var(--transition-speed), transform var(--transition-speed);
}

.sidebar-nav li a:hover {
    background-color: #374151;
    color: var(--sidebar-text-active);
    transform: translateX(2px);
}

.sidebar-nav li.active a {
    background-color: var(--primary-color);
    color: var(--sidebar-text-active);
}

.sidebar-nav i {
    margin-right: 15px;
    width: 20px;
}

/* -- 4. Card Styles (Original Alignment Preserved) -- */
.card {
    background-color: var(--card-bg);
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
    transition: background-color var(--transition-speed) ease;
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 25px;
    border-bottom: 1px solid var(--border-color);
}

.card-header h2 {
    margin: 0;
    font-size: 22px;
}

.card-body {
    padding: 25px;
}

/* -- 5. Buttons & MODIFIED Form Styles -- */
.btn {
    border: none;
    padding: 10px 18px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: background-color 0.2s ease-in-out, transform 0.2s ease;
}

.btn:hover {
    transform: translateY(-1px);
}

.btn-primary {
    background-color: var(--primary-color);
    color: #fff;
}

.btn-primary:hover {
    background-color: var(--primary-hover-color);
}

/* -- RE-STYLED INPUTS (WITH FIX FOR SETTINGS PAGE) -- */
.form-group label, .form-row label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    font-size: 14px;
    color: #6b7280;
}
[data-theme="dark"] .form-group label, [data-theme="dark"] .form-row label {
    color: #9ca3af;
}

.form-group input, .form-group select, .form-group textarea,
.form-row input, .form-row textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 15px;
    background-color: var(--main-bg); /* Match main background */
    color: var(--font-color);
    transition: border-color 0.2s, box-shadow 0.2s;
    font-family: 'Poppins', sans-serif;
}

.form-group input:focus, .form-group select:focus, .form-group textarea:focus,
.form-row input:focus, .form-row textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary-color) 20%, transparent);
}

.form-group input[readonly] {
    background-color: color-mix(in srgb, var(--main-bg) 50%, var(--card-bg));
    cursor: not-allowed;
}

/* -- 6. Table Styles (Original Alignment Preserved) -- */
.product-table {
    width: 100%;
    border-collapse: collapse;
    text-align: left;
    font-size: 15px;
}

.product-table th, .product-table td {
    padding: 15px;
    border-bottom: 1px solid var(--border-color);
}

.product-table thead {
    background-color: var(--main-bg);
    color: #6b7280;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.invoice-items-table .item-qty,
.invoice-items-table .item-price,
.invoice-items-table .item-select,
.invoice-items-table .item-discount {
    width: 100%;
    padding: 8px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--main-bg);
    color: var(--font-color);
}

/* --- FIX for the Upload Button --- */
.btn-secondary {
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
}
.btn-secondary:hover {
    background-color: var(--btn-secondary-hover-bg);
}

.btn-delete { background: none; border: none; color: #ef4444; cursor: pointer; font-size: 18px; }
.invoice-totals { margin-top: 30px; max-width: 300px; margin-left: auto; text-align: right; }
.invoice-totals div { display: grid; grid-template-columns: 1fr 1fr; padding: 8px 0; font-size: 15px; }
.invoice-totals .grand-total { font-weight: 600; font-size: 18px; margin-top: 10px; border-top: 2px solid var(--border-color); }
.invoice-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }


/* -- 7. Dashboard & Other Components (Original Alignment Preserved) -- */
.main-title { font-size: 28px; font-weight: 600; margin-bottom: 20px; }
.stats-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
.stat-card { background-color: var(--card-bg); border-radius: 12px; padding: 20px; display: flex; align-items: center; gap: 20px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05); }
.card-icon { width: 50px; height: 50px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 22px; }
.card-info { display: flex; flex-direction: column; }
.card-title { font-size: 14px; color: #6b7280; margin-bottom: 5px; }
.card-value { font-size: 24px; font-weight: 600; }
.status-badge { padding: 4px 12px; border-radius: 9999px; font-size: 12px; font-weight: 600; text-transform: uppercase; }
.status-paid { background-color: #dcfce7; color: #166534; }
.status-pending { background-color: #ffedd5; color: #9a3412; }
.status-overdue { background-color: #fee2e2; color: #b91c1c; }
.search-container { position: relative; }
.search-container i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #9ca3af; }
#searchInput { padding: 10px 15px 10px 40px; border: 1px solid var(--border-color); border-radius: 8px; width: 300px; font-size: 15px; background-color: var(--main-bg); color: var(--font-color); }
.table-actions a { color: #6b7280; text-decoration: none; margin: 0 8px; font-size: 16px; transition: color 0.2s; }
.table-actions a:hover { color: var(--primary-color); }
.settings-section { padding-bottom: 25px; margin-bottom: 25px; border-bottom: 1px solid var(--border-color); }
.settings-section:last-of-type { border-bottom: none; margin-bottom: 0; }
.settings-section h3 { font-size: 18px; font-weight: 600; margin-bottom: 20px; }
.form-row { display: flex; align-items: flex-start; margin-bottom: 15px; }
.form-row label { width: 200px; flex-shrink: 0; padding-top: 10px; font-weight: 500; }
.form-row input[type="text"], .form-row textarea { flex-grow: 1; }
.logo-uploader { display: flex; align-items: center; gap: 20px; }
#logoPreview { width: 80px; height: 80px; border-radius: 8px; border: 1px solid var(--border-color); object-fit: contain; }
#logoUpload { display: none; }
.logo-uploader .btn { padding: 8px 15px; }
.settings-actions { padding-top: 20px; text-align: right; border-top: 1px solid var(--border-color); }
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); display: none; justify-content: center; align-items: center; z-index: 1000; }
.modal-overlay.active { display: flex; }
.modal-content { background-color: var(--card-bg); padding: 25px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); width: 90%; max-width: 500px; }
.modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-color); padding-bottom: 15px; margin-bottom: 20px; }
.modal-header h2 { margin: 0; font-size: 20px; }
.modal-close { background: none; border: none; font-size: 28px; cursor: pointer; color: #6b7280; }
.modal-body .form-group { margin-bottom: 15px; }
.modal-footer { display: flex; justify-content: flex-end; gap: 10px; padding-top: 20px; margin-top: 20px; border-top: 1px solid var(--border-color); }
.auth-body { display: flex; justify-content: center; align-items: center; min-height: 100vh; background-color: var(--main-bg); }
.auth-container { background-color: var(--card-bg); padding: 40px; border-radius: 12px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); width: 100%; max-width: 400px; text-align: center; }
.auth-container h2 { margin-bottom: 10px; font-size: 24px; }
.auth-container p { margin-bottom: 30px; color: #6b7280; }
.auth-container .form-group { text-align: left; margin-bottom: 20px; }
.auth-btn { width: 100%; justify-content: center; padding: 12px; }
.auth-switch { margin-top: 30px; font-size: 14px; }
.auth-switch a { color: var(--primary-color); text-decoration: none; font-weight: 500; }
.invoice-actions { display: flex; justify-content: space-between; margin-bottom: 20px; }
#invoice-paper { padding: 40px; }
.invoice-header { display: flex; justify-content: space-between; align-items: flex-start; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); }
.shop-logo { max-width: 150px; max-height: 80px; }
.invoice-header-right { text-align: right; }
.invoice-header-right h2 { margin: 0; font-size: 32px; }
.invoice-meta-details { display: flex; justify-content: space-between; margin-top: 30px; }
.invoice-meta-details h4 { margin-bottom: 10px; color: #6b7280; font-weight: 500; }
.invoice-meta-details p { margin: 2px 0; }
.invoice-items-detail-table { margin-top: 30px; }
@media print { body { background-color: #fff; } .sidebar, .invoice-actions { display: none; } .main-content { padding: 0; } #invoice-paper { box-shadow: none; border: none; padding: 0; } }

/* -- Theme Switcher -- */
.sidebar-footer { margin-top: auto; padding-top: 20px; border-top: 1px solid #374151; }
.theme-switcher { display: flex; align-items: center; justify-content: center; gap: 10px; color: var(--sidebar-text); }
.switch { position: relative; display: inline-block; width: 50px; height: 28px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #4b5563; transition: .4s; }
.slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; }
input:checked + .slider { background-color: var(--primary-color); }
input:checked + .slider:before { transform: translateX(22px); }
.slider.round { border-radius: 34px; }
.slider.round:before { border-radius: 50%; }

/* -- Fix for Actions Dropdown in Dark Mode -- */
.status-dropdown {
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid var(--input-border);
    background-color: var(--input-bg);
    color: var(--font-color);
    font-family: 'Poppins', sans-serif;
    font-size: 14px;
}

/* --- FIX for the Color Picker --- */
input[type="color"] {
    padding: 2px;
    height: 40px;
    width: 80px;
    cursor: pointer;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--main-bg);
}

/* Add this to the bottom of style.css */
.status-partially-paid {
    background-color: #fef9c3; /* Yellow background */
    color: #92400e;
}

/* Fix for checkbox alignment in modals */
.modal-body .form-group label {
    display: flex;
    align-items: center;
    font-weight: 500;
}

.modal-body .form-group input[type="checkbox"] {
    width: 16px;  /* Set a consistent size */
    height: 16px;
    margin-right: 10px; /* Add some space between the box and the text */
}

/* Fix for credit alert checkbox alignment */
#credit-balance-alert label {
    display: flex;
    align-items: center;
}

/* --- Comprehensive Checkbox & Label Alignment Fix --- */

/* Targets labels containing checkboxes in modals and the credit alert */
.modal-body label:has(input[type="checkbox"]),
#credit-balance-alert label {
    display: flex;
    align-items: center; /* Vertically aligns the checkbox with its text */
}

/* General style for the checkboxes themselves */
.modal-body input[type="checkbox"],
#credit-balance-alert input[type="checkbox"] {
    width: 16px;
    height: 16px;
    margin-right: 10px; /* Adds space between the box and text */
    flex-shrink: 0; /* Prevents checkbox from shrinking */
}

/* --- New: Styles for the credit alert box layout --- */
#credit-balance-alert {
    display: flex;
    flex-direction: column; /* Stacks the text and the checkbox line vertically */
    align-items: flex-start; /* Left-aligns everything inside the box */
    gap: 8px; /* Adds a small space between the lines */
}

/* Add these new styles to the end of your style.css file */

.report-filters {
    display: flex;
    gap: 15px;
    align-items: center;
    margin-bottom: 20px;
}

.report-filters input[type="date"] {
    padding: 8px 10px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 15px;
    background-color: var(--main-bg);
    color: var(--font-color);
    font-family: 'Poppins', sans-serif;
}

/* --- Dark Mode Specific Styles for Date Picker --- */
[data-theme="dark"] .report-filters input[type="date"] {
    color-scheme: dark;
}

/* --- Add these styles to the end of the file --- */

/* Consistent styling for date inputs in both modes */
.report-filters input[type="date"],
.invoice-details input[type="date"] {
    padding: 8px 10px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 15px;
    background-color: var(--main-bg);
    color: var(--font-color);
    font-family: 'Poppins', sans-serif;
    height: 40px; /* Match the height of other form inputs */
}

/* This is the magic for dark mode. It tells the browser to use its dark UI for native elements. */
[data-theme="dark"] .report-filters input[type="date"],
[data-theme="dark"] .invoice-details input[type="date"] {
    color-scheme: dark;
}

/* --- DEFINITIVE FIX for Settings Page Toggle --- */

/* 1. Vertically aligns the text label and the switch */
.form-row-toggle {
    align-items: center;
}

/* 2. Removes extra top padding from the text label */
.form-row-toggle > label:first-of-type {
    padding-top: 0;
}

/* 3. This is the most important part: It forces the switch
      back to its correct size, overriding the conflicting style. */
.form-row .switch {
    width: 50px !important;
    height: 28px;
}